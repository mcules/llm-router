{{ define "models.html" }}{{ template "layout.html" . }}{{ end }}
{{ define "page_content" }}{{ template "content_models" . }}{{ end }}

{{ define "content_models" }}
<h1>Models</h1>
<p class="muted">Now: {{ .Now }}</p>

<table>
  <thead>
    <tr>
      <th>Model</th>
      <th>Node</th>
      <th>State</th>
      <th>Loaded since</th>
      <th>Last seen</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
  {{ range .Models }}
    <tr>
      <td>{{ .ModelID }}</td>
      <td>{{ .NodeID }}</td>
      <td>{{ .State }}</td>
      <td>{{ .LoadedSince }}</td>
      <td>{{ .LastSeen }}</td>
      <td>
        <div style="display:flex; gap:4px">
        {{ if eq .State "ready" }}
          <form method="post" action="/ui/models/unload" style="margin:0">
            <input type="hidden" name="node_id" value="{{ .NodeID }}"/>
            <input type="hidden" name="model_id" value="{{ .ModelID }}"/>
            <button type="submit" style="color: #e74c3c">Unload</button>
          </form>
        {{ end }}
        
        <form method="post" action="/ui/policies/upsert" style="margin:0">
            <input type="hidden" name="model_id" value="{{ .ModelID }}"/>
            <input type="hidden" name="pinned" value="true"/>
            <button type="submit" title="Always keep this model loaded">Pin</button>
        </form>
        </div>
      </td>
    </tr>
  {{ end }}
  </tbody>
</table>
{{ end }}
